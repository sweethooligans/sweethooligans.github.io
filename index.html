<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sweet Hooligans – Map Generator (Screenshot Mode)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--
    Screenshot tips (Chrome):
    1) Click "Clean View" to hide UI.
    2) Open DevTools (Ctrl/Cmd+Shift+I) → Device Toolbar (Ctrl/Cmd+Shift+M).
    3) Set a custom size (e.g., 5120×2880) and DPR=2 for ultra crisp.
    4) Ctrl/Cmd+Shift+P → "Capture node screenshot" → select #map.
    5) Or use your OS screenshot tool while Clean View is on.
  -->
  <style>
    html, body { height: 100%; margin: 0; background: #0b0b0d; color: #fff;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    #map { width: 100%; height: 100vh; position: relative; background: #000; }

    .bar {
      position: absolute; left: 12px; right: 12px;
      display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
      background: rgba(24,24,27,.9); border: 1px solid rgba(255,255,255,.15);
      border-radius: 12px; padding: 8px 10px; z-index: 5;
    }
    #top { top: 12px; }
    #bottom { bottom: 12px; justify-content: center; }

    input[type="text"] {
      flex: 1 1 320px; max-width: 560px;
      background: rgba(255,255,255,.1); color: #fff;
      border: 1px solid rgba(255,255,255,.2); border-radius: 10px;
      padding: 10px 12px; font-size: 16px; outline: none;
    }
    .btn {
      appearance: none; border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.12); color: #fff; border-radius: 10px;
      padding: 10px 12px; font-weight: 600; font-size: 14px; cursor: pointer;
    }
    .btn.primary { background: #4CAF50; }
    .tabs { display: flex; gap: 6px; }
    .tab {
      padding: 8px 10px; border-radius: 10px;
      border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.12); cursor: pointer; font-size: 13px;
    }
    .tab.active { background: #4CAF50; }

    .note {
      position: absolute; right: 12px; bottom: 70px; font-size: 12px; opacity: .85;
      background: rgba(24,24,27,.9); border: 1px solid rgba(255,255,255,.15);
      border-radius: 10px; padding: 6px 8px; z-index: 5;
    }

    /* Clean View hides UI for screenshot; Google attribution stays visible */
    body.clean .bar, body.clean .note { display: none; }
    body.clean #map { height: 100vh; }
  </style>
</head>
<body>
  <div id="map" aria-label="Map"></div>

  <div id="top" class="bar">
    <form id="address-form" style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; width:100%">
      <input id="address" type="text" placeholder="Enter address (e.g., 1600 Pennsylvania Ave NW, DC)" />
      <button class="btn primary" type="submit">Search</button>
      <div class="tabs" aria-label="Map Styles">
        <button class="tab active" data-style="style1" type="button">Style 1</button>
        <button class="tab" data-style="style2" type="button">Style 2</button>
        <button class="tab" data-style="style3" type="button">Style 3</button>
      </div>
      <button class="btn" id="cleanToggle" type="button" title="Hide UI for clean screenshot (hotkey: C)">Clean View</button>
    </form>
  </div>

  <div id="bottom" class="bar">
    <button class="btn" id="zoomOut" type="button">−</button>
    <span id="zoomLevel" style="min-width:3ch;text-align:center">12</span>
    <button class="btn" id="zoomIn" type="button">+</button>
    <button class="btn" id="centerMarker" type="button">Center to Marker</button>
  </div>

  <div class="note">Tip: drag the ❤️ to fine-tune the location. Press <b>C</b> for Clean View.</div>

  <script>
    // ===== CONFIG: your key + Map IDs =====
    const API_KEY = "AIzaSyBviIcXPutnW2Y49AxXduizoHy2_c9QEcI";
    const MAP_IDS = {
      style1: "49e651064b8ea8d6947bd49c",
      style2: "49e651064b8ea8d68e9a9d8b",
      style3: "49e651064b8ea8d625a41a78"
    };

    const HEART_ICON_URL = "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Heart_coraz%C3%B3n.svg/1920px-Heart_coraz%C3%B3n.svg.png";
    const HEART_SCREEN_PX = 34;
    const DEFAULT_CENTER = { lat: 40.7128, lng: -74.0060 };
    const DEFAULT_ZOOM = 12;

    let map, marker, geocoder;
    let currentStyleKey = "style1";

    function recreateMap(styleKey, center, zoom, markerPos){
      map = new google.maps.Map(document.getElementById("map"), {
        center: center || DEFAULT_CENTER,
        zoom: zoom ?? DEFAULT_ZOOM,
        mapId: MAP_IDS[styleKey],
        clickableIcons: false,
        gestureHandling: "greedy",
        mapTypeControl: false,
        streetViewControl: false,
        fullscreenControl: false
      });

      marker = new google.maps.Marker({
        position: markerPos || center || DEFAULT_CENTER,
        map,
        draggable: true,
        icon: { url: HEART_ICON_URL, scaledSize: new google.maps.Size(HEART_SCREEN_PX, HEART_SCREEN_PX) },
        title: "Drag me to adjust"
      });

      map.addListener("zoom_changed", () => {
        document.getElementById("zoomLevel").textContent = map.getZoom();
      });
    }

    // Google callback
    window.initMap = function(){
      geocoder = new google.maps.Geocoder();
      recreateMap(currentStyleKey);

      // Address search
      document.getElementById("address-form").addEventListener("submit", (e)=>{
        e.preventDefault();
        const addr = document.getElementById("address").value.trim();
        if (!addr) return;
        geocoder.geocode({ address: addr }, (results, status)=>{
          if (status === "OK" && results[0]){
            const loc = results[0].geometry.location;
            map.panTo(loc);
            marker.setPosition(loc);
            if (map.getZoom() < 14) map.setZoom(14);
          } else {
            alert("Address not found: " + status);
          }
        });
      });

      // Style tabs — recreate map for reliable switching
      document.querySelectorAll(".tab").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          if (btn.classList.contains("active")) return;
          document.querySelectorAll(".tab").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");

          currentStyleKey = btn.dataset.style;
          const c = map.getCenter(), z = map.getZoom(), mPos = marker.getPosition();
          recreateMap(currentStyleKey, c, z, mPos);
        });
      });

      // Zoom/center controls
      document.getElementById("zoomIn").addEventListener("click", ()=> map.setZoom(map.getZoom()+1));
      document.getElementById("zoomOut").addEventListener("click", ()=> map.setZoom(map.getZoom()-1));
      document.getElementById("centerMarker").addEventListener("click", ()=> map.panTo(marker.getPosition()));

      // Clean View toggle + hotkey
      function toggleClean(){
        document.body.classList.toggle("clean");
        document.getElementById("cleanToggle").textContent =
          document.body.classList.contains("clean") ? "Exit Clean View" : "Clean View";
      }
      document.getElementById("cleanToggle").addEventListener("click", toggleClean);
      window.addEventListener("keydown", (e)=> { if(e.key.toLowerCase()==="c") toggleClean(); });

      // Keep zoom indicator correct
      document.getElementById("zoomLevel").textContent = map.getZoom();
      map.addEventListener?.("resize", ()=>{}) // noop for future
      window.addEventListener("resize", ()=> google.maps.event.trigger(map, "resize"));
    };
  </script>

  <!-- Load Google Maps after defining initMap -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBviIcXPutnW2Y49AxXduizoHy2_c9QEcI&callback=initMap" async defer></script>
</body>
</html>
